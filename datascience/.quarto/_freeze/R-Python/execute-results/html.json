{
  "hash": "f779aed51f27c45c4b2974c8765d9eac",
  "result": {
    "markdown": "---\ntitle: \"R-Python\"\nknitr: \n  opts_chunk: \n    comment: \"#>>>\"\n    collapse: TRUE\nnumber-sections: true\ncode-fold: show\ncode-link: true\ncode-tools: true\n---\n\n\n# R-Python {.unnumbered}\n\n## [reticulate 包](https://rstudio.github.io/reticulate/index.html){.uri}\n\n\n::: {.cell hash='R-Python_cache/html/unnamed-chunk-1_61ff37c4735e048792b422f3efafa870'}\n\n```{.r .cell-code}\nlibrary(reticulate)\n```\n:::\n\n\n## **安装 python 模块**\n\n[安装Python module](https://rstudio.github.io/reticulate/articles/python_packages.html)\n\n\n::: {.cell hash='R-Python_cache/html/unnamed-chunk-2_1dc4606c547f22caf1e8b36443237d7a'}\n\n```{.r .cell-code}\n# 默认从conda安装\n\npy_install(\"seaborn\")\n\n# 查看模块是否已安装\npy_module_available('seaborn')\npy_module_available('numpy')\npy_module_available('pandas')\npy_module_available('scanpy')\n```\n:::\n\n\n## 调用 Python 模块\n\n\n::: {.cell hash='R-Python_cache/html/unnamed-chunk-3_c137d7ac92dead4f1f3c01decd7048fc'}\n\n```{.r .cell-code}\n# 调用os模块(module)的listdir()函数\nos <- import(\"os\")\nos$listdir(\"./\")\n#>  [1] \"03dictionary_cache\"      \"class_cache\"            \n#>  [3] \"control_structure_cache\" \".quarto\"                \n#>  [5] \"01basic_data_type\"       \"01basic_data_type_cache\"\n#>  [7] \"02list_cache\"            \"preface_cache\"          \n#>  [9] \"R-Python_cache\"          \"R-Python_files\"         \n#> [11] \"summary_cache\"           \"function_cache\"         \n#> [13] \"index_cache\"             \"intro_cache\"            \n#> [15] \"function.qmd\"            \"index.qmd\"              \n#> [17] \"intro.qmd\"               \"pip-command-options.jpg\"\n#> [19] \"preface.qmd\"             \"README.md\"              \n#> [21] \"references.bib\"          \"references.qmd\"         \n#> [23] \"R-Python.qmd\"            \"summary.qmd\"            \n#> [25] \"_quarto.yml\"             \"01basic_data_type.qmd\"  \n#> [27] \"02list.qmd\"              \"03dictionary.qmd\"       \n#> [29] \"class.qmd\"               \"control_structure.qmd\"  \n#> [31] \"cover.png\"               \"datascience_notes.Rproj\"\n#> [33] \".gitignore\"              \".Rproj.user\"            \n#> [35] \"docs\"                    \"index.html\"             \n#> [37] \"site_libs\"               \"intro.html\"             \n#> [39] \"summary.html\"            \"references.html\"        \n#> [41] \"R-Python.rmarkdown\"\n\n# 调用seaborn模块的load_dataset()函数\n# 需要seaborn模块已安装\nsns <- import(\"seaborn\")\ntips <- sns$load_dataset(\"tips\")\nprint(head(tips))\n#>   total_bill  tip    sex smoker day   time size\n#> 1      16.99 1.01 Female     No Sun Dinner    2\n#> 2      10.34 1.66   Male     No Sun Dinner    3\n#> 3      21.01 3.50   Male     No Sun Dinner    3\n#> 4      23.68 3.31   Male     No Sun Dinner    2\n#> 5      24.59 3.61 Female     No Sun Dinner    4\n#> 6      25.29 4.71   Male     No Sun Dinner    4\n```\n:::\n\n\n## markdown中直接使用Python\n\n\n::: {.cell hash='R-Python_cache/html/unnamed-chunk-4_1e89f34a5fe23fb1bf81e90b7d9b2362'}\n\n```{.python .cell-code}\nimport seaborn as sns\ntips = sns.load_dataset(\"tips\")\ntips.head()\n#>>>    total_bill   tip     sex smoker  day    time  size\n#>>> 0       16.99  1.01  Female     No  Sun  Dinner     2\n#>>> 1       10.34  1.66    Male     No  Sun  Dinner     3\n#>>> 2       21.01  3.50    Male     No  Sun  Dinner     3\n#>>> 3       23.68  3.31    Male     No  Sun  Dinner     2\n#>>> 4       24.59  3.61  Female     No  Sun  Dinner     4\n\nsns.scatterplot(x=\"total_bill\", y=\"tip\", data=tips, hue=\"smoker\")\n\nimport pandas\n```\n\n::: {.cell-output-display}\n![](R-Python_files/figure-html/unnamed-chunk-4-1.png){width=576}\n:::\n:::\n\n\n## **markdown 中 Python 与 R 对象相互调用**\n\n### Python调用R对象\n\n\n::: {.cell hash='R-Python_cache/html/unnamed-chunk-5_23c7d42ceb347e4162b04cf48622cb76'}\n\n```{.r .cell-code}\nx <- c(1, 2, 3)\ny <- data.frame(a = c(1, 2), b = c(3, 4))\n```\n:::\n\n::: {.cell hash='R-Python_cache/html/unnamed-chunk-6_23359ed28af67212dd5e5314a4573285'}\n\n```{.python .cell-code}\nr.x\n#>>> [1.0, 2.0, 3.0]\nr.y\n#>>>      a    b\n#>>> 0  1.0  3.0\n#>>> 1  2.0  4.0\n```\n:::\n\n\n### R调用Python对象\n\n\n::: {.cell hash='R-Python_cache/html/unnamed-chunk-7_451a4a2fceeb558046491455beaaa98a'}\n\n```{.python .cell-code}\nimport pandas as pd\nm = [1, 2, 3]\nn = pd.DataFrame([[1, 2], [3, 4]], columns=[\"a\", \"b\"])\n```\n:::\n\n::: {.cell hash='R-Python_cache/html/unnamed-chunk-8_9b99cf1d900e65c34c0a2ee5f8caddc9'}\n\n```{.r .cell-code}\npy$m\n#> module '__main__' has no attribute 'm'\npy$n\n#> module '__main__' has no attribute 'n'\n```\n:::\n\n\n## **Python 与 R 对象相互转换**\n\n| R                      | Python            | 例                                               |\n|------------------|------------------|-----------------------------------|\n| 单元素向量             | 标量Scalar        | `1`、 `1L`、`TRUE`、`\"foo\"`                      |\n| 未命名列表或多元素向量 | List              | `c(1.0, 2.0, 3.0)`, `c(1L, 2L, 3L)`              |\n| 命名列表               | Dict              | `list(a = 1L, b = 2.0)`, `dict(x = x_data)`      |\n| Matrix/Array           | NumPy ndarray     | `matrix(c(1,2,3,4), nrow = 2, ncol = 2)`         |\n| Data Frame             | Pandas DataFrame  | `data.frame(x = c(1,2,3), y = c(\"a\", \"b\", \"c\"))` |\n| Function               | Python function   | `function(x) x + 1`                              |\n| NULL, TRUE, FALSE      | None, True, False | `NULL`, `TRUE`, `ALSE`                           |\n\n: Type conversions\n\n### **R** → Python\n\n\n::: {.cell hash='R-Python_cache/html/unnamed-chunk-9_562aa7611fbf9dbd80dc70a10d68906f'}\n\n```{.r .cell-code}\nA <- 1\nB <- c(1, 2, 3)\nC <- c(a = 1, b = 2, c = 3)\nD <- matrix(1:4, nrow = 2)\nE <- data.frame(a = c(1, 2), b = c(3, 4))\nG <- list(1, 2, 3)\nH <- list(c(1, 2), c(3, 4))\nI <- list(a = c(1, 2), b = c(3, 4))\nJ <- function(a, b) {\n  return(a + b)\n  }\nK1 <- NULL\nK2 <- T\nK3 <- F\n```\n:::\n\n::: {.cell hash='R-Python_cache/html/unnamed-chunk-10_2e0b58adc302fb3450f37402df143a46'}\n\n```{.python .cell-code}\n### float\nr.A\n#>>> 1.0\ntype(r.A)\n#>>> <class 'float'>\n\n### list\nr.B\n#>>> [1.0, 2.0, 3.0]\ntype(r.B)\n#>>> <class 'list'>\n\nr.C\n#>>> [1.0, 2.0, 3.0]\ntype(r.C)\n#>>> <class 'list'>\n\n### numpy.ndarray\nr.D\n#>>> array([[1, 3],\n#>>>        [2, 4]])\ntype(r.D)\n#>>> <class 'numpy.ndarray'>\n\n### pandas.core.frame.DataFrame\nr.E\n#>>>      a    b\n#>>> 0  1.0  3.0\n#>>> 1  2.0  4.0\ntype(r.E)\n#>>> <class 'pandas.core.frame.DataFrame'>\n\n### list\nr.G\n#>>> [1.0, 2.0, 3.0]\ntype(r.G)\n#>>> <class 'list'>\n\nr.H\n#>>> [[1.0, 2.0], [3.0, 4.0]]\ntype(r.H)\n#>>> <class 'list'>\n\n### dict\nr.I\n#>>> {'a': [1.0, 2.0], 'b': [3.0, 4.0]}\ntype(r.I)\n#>>> <class 'dict'>\n\n### function\nr.J\n#>>> <function make_python_function.<locals>.python_function at 0x000001EBF27CB4C0>\ntype(r.J)\n#>>> <class 'function'>\nr.J(2, 3)\n#>>> 5\n\n\n### NoneType\nr.K1\ntype(r.K1)\n#>>> <class 'NoneType'>\n\n\n### bool\nr.K2\n#>>> True\ntype(r.K2)\n#>>> <class 'bool'>\nr.K3\n#>>> False\ntype(r.K3)\n#>>> <class 'bool'>\n```\n:::\n\n\n### **Python** → R\n\n\n::: {.cell hash='R-Python_cache/html/unnamed-chunk-11_86d20a38572b575176830e13a5646c8f'}\n\n```{.python .cell-code}\nA = 1\nB = [1, 2, 3]\nC = [[1, 2], [3, 4]]\nD1 = [[1], 2, 3]\nD2 = [[1, 2], 2, 3]\n\nE = (1, 2, 3)\n\nFF = ((1, 2), (3, 4))\n\nG = ((1, 2), 3, 4)\n\nH = {\"a\": [1, 2, 3],  \"b\": [2, 3, 4]}\n     \nI = {\"a\": 1,\"b\": [2, 3, 4]}\n     \ndef J(a, b):\n  return a + b\n```\n:::\n\n::: {.cell hash='R-Python_cache/html/unnamed-chunk-12_1db8d64ddb23f844b9e715cea12bcd83'}\n\n```{.r .cell-code}\n### integer\npy$A\n#> module '__main__' has no attribute 'A'\nclass(py$A)\n#> module '__main__' has no attribute 'A'\n\npy$B\n#> module '__main__' has no attribute 'B'\nclass(py$B)\n#> module '__main__' has no attribute 'B'\n\n### list\npy$C\n#> module '__main__' has no attribute 'C'\nclass(py$C)\n#> module '__main__' has no attribute 'C'\n\npy$D1\n#> module '__main__' has no attribute 'D1'\nclass(py$D1)\n#> module '__main__' has no attribute 'D1'\n\npy$D2\n#> module '__main__' has no attribute 'D2'\nclass(py$D2)\n#> module '__main__' has no attribute 'D2'\n\npy$E\n#> module '__main__' has no attribute 'E'\nclass(py$E)\n#> module '__main__' has no attribute 'E'\n\npy$FF\n#> module '__main__' has no attribute 'FF'\nclass(py$FF)\n#> module '__main__' has no attribute 'FF'\n\npy$G\n#> module '__main__' has no attribute 'G'\nclass(py$G)\n#> module '__main__' has no attribute 'G'\n\npy$H\n#> module '__main__' has no attribute 'H'\nclass(py$H)\n#> module '__main__' has no attribute 'H'\n\npy$I\n#> module '__main__' has no attribute 'I'\nclass(py$I)\n#> module '__main__' has no attribute 'I'\n\n### function\npy$J\n#> module '__main__' has no attribute 'J'\nclass(py$J)\n#> module '__main__' has no attribute 'J'\npy$J(2, 3)\n#> module '__main__' has no attribute 'J'\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}